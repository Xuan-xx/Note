# java多线程

## 创建多线程

- 实例化一个`Thread`，然后调用它的start()方法；
- 新线程执行指定代码的两种方法：
  1. 从`Thread`派生一个自定义类，然后覆写run()方法；
  2. 创建`Thread`实例时，传入一个`Runnable`实例；（或者用lambda语法）
- Thread.setPriority(int n)方法可以设定线程的优先级

---

## 线程的状态

线程的状态有以下几种：

- New:新创建的进程，尚未执行；
- Runnable:运行中的进程，正在执行`run()`方法的java代码；
- Waiting:运行中的进程，因为某些操作正在等待；
- Timed Waiting:运行中的进程，因为执行`sleep()`正在计时等待；
- Blocked:运行中的进程，因为某些操作被阻塞而挂起；
- Terminated：线程已终止，因为`run()`方法执行完毕。

用一个状态转移图表示如下：

```ascii
         ┌─────────────┐
         │     New     │
         └─────────────┘
                │
                ▼
┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐
 ┌─────────────┐ ┌─────────────┐
││  Runnable   │ │   Blocked   ││
 └─────────────┘ └─────────────┘
│┌─────────────┐ ┌─────────────┐│
 │   Waiting   │ │Timed Waiting│
│└─────────────┘ └─────────────┘│
 ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
                │
                ▼
         ┌─────────────┐
         │ Terminated  │
         └─────────────┘
```



一个线程还可以等待另一个线程直到其运行结束。例如，`main`线程在启动`t`线程后，可以通过`t.join()`等待`t`线程结束后再继续运行；



---

