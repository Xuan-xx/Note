- 词法分析是编译的第一个阶段，是把源程序转换为`单词符号串`形式的中间程序
- 一般把词法分析器安排为语法分析器的一个子程序



# 设计方法

## 单词符号的分类和输出形式

### 单词符号分类

1. 保留字
2. 标识符
3. 常数
4. 运算符
5. 界符



### 词法分析程序输出单词的形式

- 单词符号通常表示成：`(单词种别，单词自身的值)`
  1. 单词种别：表示单词的种类，是``语法分析``所需要的信息。
  2. 单词自身的值：编译中其他阶段所需要的信息，用于把`同一种别的单词区分开来`



### 状态转换图

- 一个有限的有向图，结点代表状态，用圆圈表示。结点之间可由有向边连接，有向边上可标注字符。
- 状态数是有限的，其中必有一初始状态以及若干终止状态（初始状态用0表示）
- 当到达一类单词符号的终止状态时即可给出相应的单词编码。某些终止状态是在读入了一个其他不属于该单词的符号才得到响应的单词编码的，这就多读入了一个符号，需要回退，终态以``*``表识。



# 正规表达式与正规集

**正规表达式**：一种形式化的表示法，可以表示单词符号的结构，从而精确地定义单词符号集

**正规集**：正规表达式表示的集合

- `·`:表示连接（通常可省略）
- `|`:表示或
- `*`:表示闭包，R^*^表示R的闭包
- `+`:表示正则闭包，R^+^=RR^*^

书P16



# 有限自动机（FA）

## 确定有限自动机（DFA）

一个确定的有限自动机M~d~（DFA M~d~)是一个五元组M~d~=(S,$\Sigma$,f,s~0~,Z)，其中：

1. S是一个有限状态集，它的每一个元素称为一个状态
2. $\Sigma$是一个有穷输入字母表，它的每一个元素称为一个输入字符
3. f是一个从S×$\Sigma$的单值映射，即f(s~i~,a)=s~j~且有s~i~、s~j~$\in$S和a$\in$$\Sigma$;
4. s~0~$\in$S,是唯一的一个初态
5. Z$\subset$S,是一个终态集

## 非确定有限自动机（NFA）

一个非确定的有限自动机M~n~（NFA M~n~)是一个五元组M~n~=(S,$\Sigma$,f,Q,Z)，其中：

1. S、$\Sigma$、Z的意义与DFA相同；
2. f是一个从S×$\Sigma$^*^到S的子集映射
3. Q$\subset$S，是一个非空初态集



## 区别

1. NFA可以有若干个初始状态，DFA只能有一个初始状态
2. NFA的状态转换函数f是多值函数，即允许同一状态对同一字符有不同的输出边。DFA的状态转换函数f是单值映射



# 正规表达式到有限自动机的构造

书P20

## 正规表达式->NFA

- 三条转换规则



## NFA->DFA

- 任何NFA都能相应的构造出一个与之等价的DFA
- 子集法



## DFA的化简

- 寻找一个状态数比M少的DFA M^`^，使得L(M)=L(M^`^),其中DFA M^`^:
  1. 没有多余状态
  2. 在其状态集中，没有两个互相等价的状态存在